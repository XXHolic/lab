<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>File分段</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
</head>

<body>
<form>
  <fieldset>
    <legend>分段读取文件情况：</legend>
    <input type="file" id="file5" />
    <!-- <input type="button" value="中断" id="Abort" /> -->
    <p id="total"></p>
    <p id="range"></p>
    <p id="content"></p>
  </fieldset>
</form>
  <script type="text/javascript">
  function readBlob(start, end) {
    var files = document.getElementById('file5').files;

    if (!files.length) {
      alert('请选择文件');
      return false;
    }

    var file = files[0],
      start = parseInt(start, 10) || 0,
      end = parseInt(end, 10) || (file.size - 1);
    console.log(file.size);
    // document.getElementById('total').
    var r = document.getElementById('range'),
      c = document.getElementById('content');

    var reader = new FileReader();
    reader.onloadend = function(e) {
      if (this.readyState == FileReader.DONE) {
        c.textContent = this.result;
        r.textContent = "Read bytes: " + (start + 1) + " - " + (end + 1) + " of " + file.size + " bytes";
      }
    };

    var blob;
    if (file.webkitSlice) {
      blob = file.webkitSlice(start, end + 1);
    } else if (file.mozSlice) {
      blob = file.mozSlice(start, end + 1);
    } else if (file.slice) {
      blob = file.slice(start, end + 1);
    }

    reader.readAsBinaryString(blob);
  };
  document.getElementById('file5').onchange = function() {
    readBlob(0, 10);
  }
  </script>
</body>

</html>
