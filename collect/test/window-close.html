<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="keywords" content="practice">
  <meta content="">
  <meta name="format-detection" content="telephone=no">
  <title> window close </title>
  <link rel="shortcut icon" href="https://xxholic.github.io/lab/icon.ico">
  <link rel="stylesheet" href="../../css/newreset.css">
  <link rel="stylesheet" href="../../css/common.css">
</head>

<body class="pt50 tc">
  <div class="dib tl pt30" id="mainContent">
    <input />
  </div>

   <script>
    //  window.onbeforeunload = () => {
    //   //  alert('dfsf')
    //    return 'fdsfds'
    //  }
window.isCloseHint = true;
//初始化关闭
window.addEventListener("beforeunload", function(e) {
    if (window.isCloseHint) {
        var confirmationMessage = "要记得保存！你确定要离开我吗？";
        (e || window.event).returnValue = confirmationMessage; // 兼容 Gecko + IE
        return confirmationMessage; // 兼容 Gecko + Webkit, Safari, Chrome
    }
});

document.addEventListener("visibilitychange", function() {
  if (document.visibilityState === 'visible') {
    console.info('visible')
  } else {
    console.info('no visible')
  }
});

window.onunload = () => {
  debugger
  console.info('dsdsd')
}
   </script>
</body>

</html>